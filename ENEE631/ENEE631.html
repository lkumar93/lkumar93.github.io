<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Digital Image and Video Processing</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/agency.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/print.css" type="text/css" media="print">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!--<a class="navbar-brand page-scroll" href="#page-top">Start Bootstrap</a>-->
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>                    
                    <li>
                        <a class="page-scroll" href="#about">Updates</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#portfolio">Experiments</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#team">About Author</a>
                    </li>
<!--                    <li>
                        <a class="page-scroll" href="#contact">Contact</a>
                    </li>-->
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="intro-text">
                <div class="intro-lead-in">My Web Journal On</div>
                <div class="intro-heading" style="margin-top:50px;margin-bottom:75px">Digital Image and Video Processing
                </div>
                <div class="intro-lead-in" style="margin-bottom:70px">- Lakshman Kumar</div>
                
                 <a href="#about" class="page-scroll btn btn-xl" id="explore_button">Explore</a>
               </div>
               
            </div>
        </div>
    </header>
    
    

   <!-- About Section -->
    <section id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">WEEKLY UPDATES</h2>
                    <h3 class="section-subheading text-muted"></h3>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <ul class="timeline">
                        <li>
   							<div class="timeline-image">
                                <h4>
                                    <br><font size="+6"> I </font> 
                                    <br></h4>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <h4>Week 1</h4>
                                    <h4 class="subheading">02/08/2017</h4>
                                </div>
                                <div class="timeline-body">
                                   <div align="justify">
                                    <p class="text-muted">The effects of various levels of sampling and quantization on an image were observed. Mean squared error was computed to measure quality of the processed image with respect to original image. </p>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="timeline-inverted">
   							<div class="timeline-image">
                                <h4>
                                    <br><font size="+6"> II </font> 
                                    <br></h4>
                            </div>
                            <div class="timeline-panel">
                                <div class="timeline-heading">
                                    <h4>Week 2</h4>
                                    <h4 class="subheading">02/15/2017</h4>
                                </div>
                                <div class="timeline-body">
                                    <div align="justify">
                                    	<p class="text-muted">Images were subjected to point operations in order to enhance it. Also, the histogram of images were computed, analyzed and equalized in-order to improve the contrast of the image.</p>
									</div>
                                </div>
                            </div>
                        </li>
                        <li>
                            <div class="timeline-image">
                                <div class="timeline-image">
                                <h4>Next Update
                                    <br> On
                                    <br>2/22/17</h4>
                            </div>
                            </div>

                        </li>
                 
                    </ul>
                </div>
            </div>
        </div>
    </section>
   
    <!-- Portfolio Grid Section -->
    <section id="portfolio" class="bg-light-gray">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Experiments</h2>
                    <h3 class="section-subheading text-muted">Here are some experiments done based on weekly lectures using OpenCV </h3>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 col-sm-6 portfolio-item">
                    <a href="#week1" class="page-scroll ">
                        <div class="portfolio-hover">
                        </div>
                        <img src="img/week1/mickey_dp.jpg" class="img-responsive" alt="">
                    </a>
                    <div class="portfolio-caption">
                        <h4>Week 1</h4>
                        <p class="text-muted">Sampling, Quantization and Mean Squared Error</p>
                    </div>
                </div>
                
               <div class="col-md-4 col-sm-6 portfolio-item">

                    <a href="#week2" class="page-scroll " >
                    
                        <div class="portfolio-hover">
                        </div>
                        <img src="img/week2/histogram_dp.jpg" class="img-responsive" alt="">
                    </a>
                    <div class="portfolio-caption">
                        <h4>Week 2</h4>
                        <p class="text-muted">Point Operations and Histogram Equalization</p>
                    </div>
                </div>
                             
            </div>
        </div>
    </section>

    <section id="week1" >
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">WEEK 1</h2>
                    <h3 class="section-subheading text-muted">To view the implementation,&nbsp Click <a href="https://github.com/lkumar93/Image-Processing/tree/master/experiments/week1/">here</a></h3>
                </div>
            </div>
        </div>
        <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <!-- Project Details Go Here -->
                            <div align="justify">
                            <h2>Sampling</h2>
                            <div id="25_padding" style="margin-bottom:25px"></div>
                            <p>Sampling is the process by which the values of the image at all the points on the rectangular grid of the image plane are obtained. They can be done at various frequencies/resolutions. However when the sampling rate (resolution) is below the nyquist rate, the information can be lost. Below you can see the picture of mickey mouse at various resolutions ( 640 X 480, 320 X 240, 32 X 24 ). It can be observed that at the resolution of 32 X 24 the figure of mickey mouse is not clear and hence the information has been lost due to aliasing. </p>
                            <p>
                            <div style="margin-bottom:50px"></div>
                            <h3>Results</h3>	
                            <div style="margin-bottom:25px"></div>
								<h4>640 X 480 <div style="margin-bottom:25px"></div>
                            <img src="img/week1/sampling/original_image.jpg" alt=""></h4>
                                            
                            <div style="margin-bottom:50px"></div>
                            <h4>320 X 240
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week1/sampling/320_x_240_image.jpg" alt=""></h4>
                            <div style="margin-bottom:50px"></div> 
                            <h4>32 X 24
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week1/sampling/32_x_24_image.jpg" alt=""></h4>
							<div style="margin-bottom:50px"></div>
                            <h3>Code
                            <pre><code class="language-c++">
#include "stdio.h"
#include "opencv2/opencv.hpp"

using namespace cv;

int main(int argc, char** argv )
{
    Mat image;
    image = imread( "../images/mickey.jpg", 1 );

    cv::Mat resized_image1 = cv::Mat(240, 320, CV_8UC3, cv::Scalar(0, 0, 0)) ;
    cv::Mat resized_image2 = cv::Mat(24, 32, CV_8UC3, cv::Scalar(0, 0, 0)) ;

    int rows = 600;
    int cols = 800;

    resize(image,resized_image1,resized_image1.size(),0,0);
    resize(image,resized_image2,resized_image2.size(),0,0);


    if ( !image.data )
    {
        printf("No image data \n");
        return -1;
    }

    namedWindow("Original Image", WINDOW_NORMAL);
    resizeWindow("Original Image",rows,cols);
    imwrite( "../results/sampling/original_image.jpg", image );
    imshow("Original Image", image);


    namedWindow("320X240 Image", WINDOW_NORMAL );
    resizeWindow("320X240 Image",rows,cols);
    imwrite( "../results/sampling/320_x_240_image.jpg", resized_image1);
    imshow("320X240 Image", resized_image1);

    namedWindow("32X24 Image", WINDOW_NORMAL );
    resizeWindow("32X24 Image",rows,cols);
    imwrite( "../results/sampling/32_x_24_image.jpg", resized_image2 );
    imshow("32X24 Image", resized_image2);

    waitKey(0);

    return 0;
}
</code></pre></h3>
								<br></br><br></br>
                            <h2>Quantization and Mean Squared Error</h2>
                            
                            <div style="margin-bottom:25px"></div>
                            <p>Quantization is the process by which the sampled values of the image are approximated based on the desired number of distinct values. As the desired number of distinct values decreases, the quality of the image also decreases. The quality of the images can be determined using the Average Mean Squared Error, which is the average of squared difference of pixel luminance between the original image and the image with reduced number of distinct values. Below you can see the picture of avengers at various quantizations per channel ( 8-bit, 4-bit, 2-bit, 1-bit ). It can be observed that the mean squared error increases as the image is more approximated, resulting in loss of quality. </p>
                            <p>
                            <div style="margin-bottom:50px"></div>
                            <h3>Results</h3>
                            <div style="margin-bottom:25px"></div>
                            <h4>Original 8-Bit Image
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week1/quantization/original_image.jpg" alt=""> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>4-Bit Image
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week1/quantization/4_bit_image.jpg" alt=""> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>2-Bit Image
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week1/quantization/2_bit_image.jpg" alt=""> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>1-Bit Image
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week1/quantization/1_bit_image.jpg" alt=""> </h4>
							</div>

                           	<div style="margin-bottom:50px"></div>
                           	 <h3>Code
                            <pre><code class="language-c++">
#include "stdio.h"
#include "opencv2/opencv.hpp"

using namespace cv;


Mat quantize(const Mat& input_image,int number_of_bits)
{

    Mat quantized_image = input_image.clone();

    uchar masked_bit = 0xFF;

    masked_bit = masked_bit << (8 - number_of_bits);

    for(int j = 0; j < quantized_image.rows; j++)
        for(int i = 0; i < quantized_image.cols; i++)
        {
            Vec3b rgb_value = quantized_image.at<Vec3b>(j, i);
            rgb_value[0] = rgb_value[0] & masked_bit;
            rgb_value[1] = rgb_value[1] & masked_bit;
            rgb_value[2] = rgb_value[2] & masked_bit;
            quantized_image.at<Vec3b>(j, i) = rgb_value;
        }

    return quantized_image;

}

float mean_squared_error(const Mat& image_1, const Mat& image_2)
{

   int m = image_1.rows;
   int n = image_1.cols;

   float mse = 0.0;

    for(int j = 0; j < m ; j++)
        for(int i = 0; i < n; i++)
        {
            Vec3b rgb_value_1 = image_1.at<Vec3b>(j, i);
	    Vec3b rgb_value_2 = image_2.at<Vec3b>(j, i);

	    mse += abs(rgb_value_1[0]-rgb_value_2[0])^2 + abs(rgb_value_1[1]-rgb_value_2[1])^2 + abs(rgb_value_1[2]-rgb_value_2[2])^2 ;
        }

    return mse/(m*n*3);
}

int main(int argc, char** argv )
{
    Mat image, image_4_bit, image_2_bit, image_1_bit;
    image = imread( "../images/avengers.jpg", 1 );

    if ( !image.data )
    {
        printf("No image data \n");
        return -1;
    }

    image_4_bit = quantize(image,4);
    image_2_bit = quantize(image,2);
    image_1_bit = quantize(image,1);

    float mse_4_bit, mse_2_bit, mse_1_bit;

    mse_4_bit = mean_squared_error(image,image_4_bit);
    mse_2_bit = mean_squared_error(image,image_2_bit);
    mse_1_bit = mean_squared_error(image,image_1_bit);

    std::ostringstream str_4_bit, str_2_bit,str_1_bit;

    str_4_bit << "MSE of 4 Bit Image = " << mse_4_bit;
    str_2_bit << "MSE of 2 Bit Image = " << mse_2_bit;
    str_1_bit << "MSE of 1 Bit Image = " << mse_1_bit;

    namedWindow("Original Image", WINDOW_AUTOSIZE);
    imwrite( "../results/quantization/original_image.jpg", image );
    imshow("Original Image", image);

    namedWindow("4 bit Image", WINDOW_AUTOSIZE);

    putText(image_4_bit, str_4_bit.str(), cvPoint(30,30), 
    FONT_HERSHEY_COMPLEX_SMALL, 0.8, cvScalar(200,200,250), 1, CV_AA);

    imwrite( "../results/quantization/4_bit_image.jpg", image_4_bit);
    imshow("4 bit Image", image_4_bit);

    namedWindow("2 bit Image", WINDOW_AUTOSIZE);

    putText(image_2_bit, str_2_bit.str(), cvPoint(30,30), 
    FONT_HERSHEY_COMPLEX_SMALL, 0.8, cvScalar(200,200,250), 1, CV_AA);


    imwrite( "../results/quantization/2_bit_image.jpg", image_2_bit);
    imshow("2 bit Image", image_2_bit);

    namedWindow("1 bit Image", WINDOW_AUTOSIZE);

    putText(image_1_bit, str_1_bit.str(), cvPoint(30,30), 
    FONT_HERSHEY_COMPLEX_SMALL, 0.8, cvScalar(200,200,250), 1, CV_AA);


    imwrite( "../results/quantization/1_bit_image.jpg", image_1_bit);
    imshow("1 bit Image", image_1_bit);

    waitKey(0);

    return 0;
}
</code></pre></h3>
</p>
                            <ul class="list-inline">
                            </ul>
                        </div>
                    </div>
                </div>
        
        
    </section>
    
        <section id="week2" class="bg-light-gray">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">WEEK 2</h2>
                    <h3 class="section-subheading text-muted">To view the implementation,&nbsp Click <a href="https://github.com/lkumar93/Image-Processing/tree/master/experiments/week2/">here</a></h3>
                </div>
            </div>
        </div>
        <div class="container">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <!-- Project Details Go Here -->
                            <div align="justify">
                            <h2>Point Operations</h2>
                            <div style="margin-bottom:25px"></div>
                            <p>Point Operations are memoryless operations that functionally maps the intensity levels of an image to another level. This can be used to enhance the appearance of the image and feature extraction. Some of the point operations done on the image of Einstein are shown below. </p>
                            <p>
                            <div style="margin-bottom:50px"></div>
                            <h3>Results</h3>
                            <div style="margin-bottom:25px"></div>
                            <h4>RGB Image
                            <div style="margin-bottom:25px"></div>
                            <img src="img/week2/point_transformations/rgb_image.jpg" alt=""> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>Grayscale Image
                            <p>RGB images can be converted to grayscale by taking a proportion of the value in each color channel.
                            <div style="margin-bottom:10px"></div>
                            <img src="img/week2/point_transformations/grayscale_image.jpg" alt=""></p> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>Inverse Image
                            <p> Inverse operation gives the negative of the image.
                            <div style="margin-bottom:10px"></div>
                            <img src="img/week2/point_transformations/inverse_image.jpg" alt=""></p></h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>Log Image
                            <p>Log operations ,on the image intensities, non-linearly transforms the image .
                            <div style="margin-bottom:10px"></div>
                            <img src="img/week2/point_transformations/log_image.jpg" alt=""></p> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>Gamma Corrected Image
                            <p>Gamma correction can be done to compensate for the non-linearities in brightness of various displays. 
                            <div style="margin-bottom:10px"></div>
                            <img src="img/week2/point_transformations/gamma_corrected_image.jpg" alt=""></h5></h4>
							<div style="margin-bottom:50px"></div>
                            <h3>Code
                            <div style="margin-bottom:5px"></div>
                            <pre><code class="language-c++">
#include "stdio.h"
#include "opencv2/opencv.hpp"
#include "math.h"

#define R_WEIGHT 0.2989
#define G_WEIGHT 0.5870
#define B_WEIGHT 0.1140
#define TRANSFORMATION_CONSTANT 25
#define GAMMA 0.95

using namespace cv;


Mat convert_to_grayscale(const Mat& input_image)
{

    Mat rgb_image = input_image.clone();
    Mat grayscale_image = cv::Mat(rgb_image.rows, rgb_image.cols, CV_8UC1, cv::Scalar(0, 0, 0));

    for(int j = 0; j < grayscale_image.rows; j++)
        for(int i = 0; i < grayscale_image.cols; i++)
        {
            Vec3b rgb_value = rgb_image.at<Vec3b>(j, i);
	    grayscale_image.at<uchar>(j,i) = R_WEIGHT*rgb_value[0] + G_WEIGHT*rgb_value[1] + B_WEIGHT*rgb_value[2] ;
        }

    return grayscale_image;

}


Mat log_transformation(const Mat& input_image)
{

   Mat log_image = input_image.clone();

   for(int j = 0; j < log_image.rows ; j++)
        for(int i = 0; i < log_image.cols; i++)
        {
	    log_image.at<uchar>(j,i) = TRANSFORMATION_CONSTANT*log(log_image.at<uchar>(j,i)+1);
        }

    return log_image;
}

Mat inverse_transformation(const Mat& input_image)
{

   Mat inverse_image = input_image.clone();

   for(int j = 0; j < inverse_image.rows ; j++)
        for(int i = 0; i < inverse_image.cols; i++)
        {
	    inverse_image.at<uchar>(j,i) = 255 - inverse_image.at<uchar>(j,i);
        }

    return inverse_image;
}

Mat gamma_correction(const Mat& input_image)
{

   Mat gamma_corrected_image = input_image.clone();

   for(int j = 0; j < gamma_corrected_image.rows ; j++)
        for(int i = 0; i < gamma_corrected_image.cols; i++)
        {
	    gamma_corrected_image.at<uchar>(j,i) = pow( gamma_corrected_image.at<uchar>(j,i) , GAMMA );
        }

    return gamma_corrected_image;
}

int main(int argc, char** argv )
{
    Mat image, grayscale_image, log_image, inverse_image, gamma_corrected_image;

    image = imread( "../images/einstein.jpg", 1 );

    if ( !image.data )
    {
        printf("No image data \n");
        return -1;
    }

    grayscale_image = convert_to_grayscale(image);
    inverse_image = inverse_transformation(grayscale_image);
    log_image = log_transformation(grayscale_image);
    gamma_corrected_image = gamma_correction(grayscale_image);

    namedWindow("RGB Image", WINDOW_AUTOSIZE);
    imwrite( "../results/point_transformations/rgb_image.jpg", image );
    imshow("RGB Image", image);

    namedWindow("Grayscale Image", WINDOW_AUTOSIZE);
    imwrite( "../results/point_transformations/grayscale_image.jpg", grayscale_image );
    imshow("Grayscale Image", grayscale_image);

    namedWindow("Inverse Image", WINDOW_AUTOSIZE);
    imwrite( "../results/point_transformations/inverse_image.jpg", inverse_image );
    imshow("Inverse Image", inverse_image);

    namedWindow("Log Image", WINDOW_AUTOSIZE);
    imwrite( "../results/point_transformations/log_image.jpg", log_image );
    imshow("Log Image", log_image);

    namedWindow("Gamma Corrected Image", WINDOW_AUTOSIZE);
    imwrite( "../results/point_transformations/gamma_corrected_image.jpg", gamma_corrected_image );
    imshow("Gamma Corrected Image", gamma_corrected_image);

    waitKey(0);

    return 0;
}
</code></pre></h3>
								<br></br><br></br>
                            <h2>Histogram Equalization</h2>
                            
                            <div style="margin-bottom:25px"></div>
                            <p>Histogram gives the number of occurences of various intensity levels in an image. It can be used to determine the quality of the image. For an image to be visually appealing, the histogram has to be spread apart rather than being concentrated in a narrow range. An image with balanced histogram would be of high contrast, hence more attractive. Images with unbalanced histograms can be equalized in order to increase the contrast. However the side effect of equalization is that a few features might be lost. In this case, the house has disappeared. </p>
                            <p>
                            <div style="margin-bottom:50px"></div>
                            <h3>Results</h3>
                            <div style="margin-bottom:25px"></div>
                            <h4>Original Image
                             <div style="margin-bottom:25px"></div>
                            <img src="img/week2/histogram_equalization/original_image.jpg" alt=""> </h4>
                            <div style="margin-bottom:50px"></div>
                            <h4>Original Histogram
                             <div style="margin-bottom:25px"></div>
                            <img src="img/week2/histogram_equalization/original_histogram.jpg" alt=""></h4>
                            <div style="margin-bottom:50px"></div> 
                            <h4>Equalized Image
                              <div style="margin-bottom:25px"></div>
                            <img src="img/week2/histogram_equalization/equalized_image.jpg" alt=""></h4>
                            <div style="margin-bottom:50px"></div> 
                            <h4>Equalized Histogram
                              <div style="margin-bottom:25px"></div>
                            <img src="img/week2/histogram_equalization/equalized_histogram.jpg" alt=""> </h4>
                            <div style="margin-bottom:50px"></div>
							</div>

                           	<div style="margin-bottom:50px"></div>
                           	 <h3>Code
                            <pre><code class="language-c++">
#include "stdio.h"
#include "opencv2/opencv.hpp"

#define R_WEIGHT 0.2989
#define G_WEIGHT 0.5870
#define B_WEIGHT 0.1140

using namespace cv;

Mat convert_to_grayscale(const Mat& input_image)
{

    Mat rgb_image = input_image.clone();
    Mat grayscale_image = cv::Mat(rgb_image.rows, rgb_image.cols, CV_8UC1, cv::Scalar(0, 0, 0));

    for(int j = 0; j < grayscale_image.rows; j++)
        for(int i = 0; i < grayscale_image.cols; i++)
        {
            Vec3b rgb_value = rgb_image.at<Vec3b>(j, i);
	    grayscale_image.at<uchar>(j,i) = R_WEIGHT*rgb_value[0] + G_WEIGHT*rgb_value[1] + B_WEIGHT*rgb_value[2] ;
        }

    return grayscale_image;

}

void compute_histogram(const Mat& input_image, int histogram[])
{

    for (int i = 0 ; i <256 ; i++)
	histogram[i] = 0;
  
    // Store the frequency of intensities
    for(int j = 0; j < input_image.rows; j++)
        for(int i = 0; i < input_image.cols; i++)
        {
	    histogram[input_image.at<uchar>(j,i)]++;
        }

}

void display_histogram(int histogram[], const char* name)
{
    int hist[256];

    for(int i = 0; i < 256; i++)
    {
        hist[i]=histogram[i];
    }

    // draw the histograms
    int hist_w = 512; int hist_h = 400;
    int bin_w = cvRound((double) hist_w/256);
 
    Mat histogram_image(hist_h, hist_w, CV_8UC1, Scalar(255, 255, 255));
 
    // find the maximum intensity element from histogram
    int max = hist[0];
    for(int i = 1; i < 256; i++){
        if(max < hist[i]){
            max = hist[i];
        }
    }
 
    // normalize the histogram between 0 and histImage.rows
 
    for(int i = 0; i < 256; i++){
        hist[i] = ((double)hist[i]/max)*histogram_image.rows;
    }
 
 
    // draw the intensity line for histogram
    for(int i = 0; i < 256; i++)
    {
        line(histogram_image, Point(bin_w*(i), hist_h),
                              Point(bin_w*(i), hist_h - hist[i]),
             Scalar(0,0,0), 1, 8, 0);
    }
 
    // display histogram
    namedWindow(name, CV_WINDOW_AUTOSIZE);
    imshow(name, histogram_image);

    std::ostringstream display_string ;

    display_string<<"../results/histogram_equalization/"<< name <<".jpg";

    imwrite( display_string.str(), histogram_image );
}

void compute_cumulative_histogram(int histogram[], int cumulative_histogram[])
{
    cumulative_histogram[0] = histogram[0];
  
    for(int j = 1; j < 256 ; j++)
    {
	cumulative_histogram[j] = histogram[j]+cumulative_histogram[j-1];
    }
}

int scale_histogram(int cumulative_histogram[],int scaled_histogram[], float scaling_factor)
{
  
    for(int j = 0; j < 256 ; j++)
    {
	scaled_histogram[j] = cvRound(cumulative_histogram[j]*scaling_factor);
    }

}

Mat equalize_image(const Mat& input_image, int histogram[])
{

   int cumulative_histogram[256], scaled_histogram[256];

   int image_size = input_image.rows*input_image.cols;

   // Compute alpha (scaling factor) based on total number of pixels and maximum intensity   
   float scaling_factor = 255.0/image_size;


   // Compute probability of each intensity by normalizing the histogram
   double intensity_probability[256];
   
   for(int i = 0; i < 256 ; i++)
   {
      intensity_probability[i] =  histogram[i]/image_size;
   }


   // Compute the cumulative histogram by adding all values of lower intensities
   compute_cumulative_histogram(histogram, cumulative_histogram);

   // Scaled the cumulative histogram by the scaling factor
   scale_histogram(cumulative_histogram, scaled_histogram, scaling_factor);

   Mat equalized_image = input_image.clone();

   // Equalize the image by looking at the value from scaled histogram at the intensity 
   // level at the corresponding pixel

   for(int j = 0; j < equalized_image.rows; j++)
       for(int i = 0; i < equalized_image.cols; i++)
       {
	    equalized_image.at<uchar>(j,i) = saturate_cast<uchar>(scaled_histogram[equalized_image.at<uchar>(j,i)]);
       }   

  
   return equalized_image;

}


int main(int argc, char** argv )
{
    Mat rgb_image, grayscale_image, equalized_image;
    rgb_image = imread( "../images/trees.jpg", 1 );

    if ( !rgb_image.data )
    {
        printf("No image data \n");
        return -1;
    }

    int histogram[256], equalized_histogram[256];

    grayscale_image = convert_to_grayscale(rgb_image);

    compute_histogram(grayscale_image, histogram);

    equalized_image = equalize_image(grayscale_image, histogram);
 
    compute_histogram(equalized_image, equalized_histogram);

    namedWindow("Original Image", WINDOW_AUTOSIZE);
    imwrite( "../results/histogram_equalization/original_image.jpg", rgb_image );
    imshow("Original Image", grayscale_image);

    display_histogram(histogram, "original_histogram");

    namedWindow("Equalized Image", WINDOW_AUTOSIZE);
    imwrite( "../results/histogram_equalization/equalized_image.jpg", equalized_image );
    imshow("Equalized Image", equalized_image);

    display_histogram(equalized_histogram, "equalized_histogram");
    
    waitKey(0);

    return 0;
}
</code></pre></h3>
</p>
                            <ul class="list-inline">
                            </ul>
                        </div>
                    </div>
                </div>
        
        
    </section>
    
     <!-- Team Section -->
    <section id="team" class="bg-light-gray">

        <div class="container">
             <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">ABOUT ME</h2>                    
                </div>
            </div>
             </div>
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center" >
                    <div align="justify">
                    
                    <p class="large text-muted" style="margin-top: 30px;margin-bottom: 30px"><font color="#D4C6C6">I am a second year master's degree student in Robotics, at University of Maryland, College Park (UMD) , specializing in Vision based Control of Autonomous Vehicles. I will be graduating in May 2017.  I look forward to work at the intersection of Robotics, Computer Vision and Machine Learning.</font> </p>
					</div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="team-member">
                        <img src="img/team/1.jpg" class="img-responsive img-circle" id="author">	
                        <h4>Lakshman Kumar K N</h4>
                        <p class="text-muted">Roboticist</p>
                        <ul class="list-inline social-buttons">
                            <li><a href="https://www.linkedin.com/in/lakshmankumar1993/"><i class="fa fa-linkedin"></i></a>
                            </li>
                        </ul>
                    </div>
                </div>           
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <span class="copyright">&copy; Copyright 2017 | Lakshman Kumar</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Portfolio Modals -->
	
        </div>
    </div>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="js/classie.js"></script>
    <script src="js/cbpAnimatedHeader.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/agency.js"></script>

</body>

</html>
